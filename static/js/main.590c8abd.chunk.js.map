{"version":3,"sources":["assets/images/logo.png","components/layout/Header/index.js","components/layout/Footer/index.js","utils/piximo-tool.js","components/Controls/index.js","components/Canvas/index.js","App.js","index.js"],"names":["module","exports","Header","props","logo","logoText","children","className","src","alt","Footer","piximoTools","arr","occurrences","forEach","item","hasOwnProperty","Object","entries","imageData","length","pixels","i","r","g","b","a","push","value","Array","from","map","_","canvas","pixelSize","width","height","ctx","getContext","createPixel","posX","posY","size","slice","getImageData","converted","data","mostCommom","reduce","color","next","pixelReady","split","concat","newPixel","ImageData","Uint8ClampedArray","putImageData","rowLength","Math","floor","columnLength","j","Controls","piximo","save","setPixelSize","setFileName","inputFile","React","createRef","useState","active","setActive","changePixelSize","htmlFor","onClick","icon","id","name","type","onChange","e","target","current","files","file","console","log","fr","FileReader","addEventListener","image","Image","clientWidth","drawImage","result","readAsDataURL","setTimeout","accept","ref","click","disabled","Canvas","fileName","piximoTool","toDataURL","document","createElement","replace","download","href","App","rel","library","add","fas","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.590c8abd.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5dee7346.png\";","import React from \"react\";\nimport \"./style.css\";\n\nconst Header = (props) => {\n  const { logo, logoText, children } = props;\n\n  return (\n    <header className=\"page_header\">\n      <div className=\"container\">\n        <div className=\"logo\">\n          <img src={logo} alt=\"Piximo\" />\n          <h1>{logoText}</h1>\n        </div>\n\n        <div className=\"menu_holder\">{children}</div>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\nimport \"./style.css\";\n\nconst Footer = (props) => {\n  const { children } = props;\n  return <footer className=\"page_footer\">{children}</footer>;\n};\n\nexport default Footer;\n","const piximoTools = {\n  getOccurrences(arr) {\n    const occurrences = {};\n\n    arr.forEach((item) =>\n      occurrences.hasOwnProperty(item)\n        ? (occurrences[item] += 1)\n        : (occurrences[item] = 1)\n    );\n\n    return Object.entries(occurrences);\n  },\n  convertImageData(imageData) {\n    const length = imageData.length / 4;\n\n    const pixels = [];\n\n    for (let i = 0; i < length; i++) {\n      const r = imageData[i * 4 + 0];\n      const g = imageData[i * 4 + 1];\n      const b = imageData[i * 4 + 2];\n      const a = imageData[i * 4 + 3];\n\n      pixels.push(`${r},${g},${b},${a}`);\n    }\n    return pixels;\n  },\n  populateArray(value = null, length = 100) {\n    return Array.from({ length }).map((_) => value);\n  },\n};\n\nexport default {\n  piximo(canvas, pixelSize) {\n    const width = canvas.width;\n    const height = canvas.height;\n    const ctx = canvas.getContext(\"2d\");\n\n    function createPixel(posX, posY, size) {\n      const slice = ctx.getImageData(posX, posY, size, size);\n      const converted = piximoTools.convertImageData(slice.data);\n      const occurrences = piximoTools.getOccurrences(converted);\n      const mostCommom = occurrences.reduce((color, next) =>\n        color[1] >= next[1] ? color : next\n      );\n\n      const pixel = piximoTools.populateArray(\n        mostCommom[0],\n        slice.data.length / 4\n      );\n      const pixelReady = pixel\n        .map((color) => color.split(\",\"))\n        .reduce((arr, next) => arr.concat(next));\n      const newPixel = new ImageData(\n        Uint8ClampedArray.from(pixelReady),\n        slice.width,\n        slice.height\n      );\n      ctx.putImageData(newPixel, posX, posY);\n    }\n\n    let rowLength = Math.floor(width / pixelSize);\n    let columnLength = Math.floor((height * rowLength) / width);\n    const size = pixelSize;\n\n    for (let i = 0; i < rowLength; i++) {\n      for (let j = 0; j < columnLength; j++) {\n        createPixel(i * size, j * size, size);\n      }\n    }\n  },\n};\n","import React from \"react\";\nimport \"./style.css\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nconst Controls = (props) => {\n  const { piximo, canvas, save, pixelSize, setPixelSize, setFileName } = props;\n\n  const inputFile = React.createRef();\n  const [active, setActive] = React.useState(false);\n\n  function handleChanges(name) {\n    setActive(false);\n    setTimeout(() => {\n      setActive(true);\n      setFileName(name);\n    }, 1000);\n  }\n\n  function handleFile() {\n    if (!inputFile.current.files[0]) {\n      return;\n    }\n    const file = inputFile.current.files[0];\n\n    console.log(canvas);\n\n    const fr = new FileReader();\n    fr.addEventListener(\"load\", createImage);\n    fr.readAsDataURL(file);\n\n    function createImage() {\n      const image = new Image();\n\n      image.addEventListener(\"load\", () => {\n        const width = canvas.current.clientWidth;\n        const height = (image.height * width) / image.width;\n\n        canvas.current.width = width;\n        canvas.current.height = height;\n\n        const ctx = canvas.current.getContext(\"2d\");\n        ctx.drawImage(image, 0, 0, width, height);\n      });\n\n      image.src = fr.result;\n    }\n\n    handleChanges(file.name);\n  }\n\n  function changePixelSize(value) {\n    if (value > 100) {\n      value = 100;\n    }\n    if (value < 3) {\n      value = 3;\n    }\n\n    setPixelSize(value);\n  }\n\n  return (\n    <div className=\"controls_holder\">\n      <div className=\"pixel-size-holder\">\n        <label htmlFor=\"pixel-size\">Set Pixel Size</label>\n        <button\n          className=\"pixel-size-button less\"\n          onClick={() => changePixelSize(pixelSize - 1)}\n        >\n          <FontAwesomeIcon icon=\"minus-circle\" />\n        </button>\n        <input\n          id=\"pixel-size\"\n          name=\"pixel-size\"\n          type=\"number\"\n          value={pixelSize}\n          onChange={(e) => changePixelSize(e.target.value)}\n        />\n\n        <button\n          className=\"pixel-size-button plus\"\n          onClick={() => changePixelSize(pixelSize + 1)}\n        >\n          <FontAwesomeIcon icon=\"plus-circle\" />\n        </button>\n      </div>\n\n      <div className=\"buttons_holder\">\n        <input\n          type=\"file\"\n          className=\"hidden\"\n          onChange={handleFile}\n          accept=\"image/*\"\n          ref={inputFile}\n        />\n\n        <button onClick={() => inputFile.current.click()}>\n          <FontAwesomeIcon icon=\"upload\" />\n          Upload\n        </button>\n        <button onClick={piximo} disabled={active ? false : true}>\n          <FontAwesomeIcon icon=\"magic\" />\n          Piximify!\n        </button>\n        <button onClick={save} disabled={active ? false : true}>\n          <FontAwesomeIcon icon=\"save\" />\n          Save\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Controls;\n","import React from \"react\";\nimport \"./style.css\";\n\nimport piximoTool from \"../../utils/piximo-tool\";\n\nimport Controls from \"../Controls\";\n\nconst Canvas = (props) => {\n  const canvas = React.createRef();\n\n  const [pixelSize, setPixelSize] = React.useState(10);\n  const [fileName, setFileName] = React.useState(\"\");\n\n  function piximo() {\n    piximoTool.piximo(canvas.current, pixelSize);\n  }\n\n  function saveImage() {\n    const image = canvas.current.toDataURL(\"image/png\");\n    const a = document.createElement(\"a\");\n\n    const name = fileName.replace(/\\.[^/.]+$/, \"\");\n\n    a.download = `${name}-piximo`;\n    a.href = image;\n    a.click();\n  }\n\n  return (\n    <div className=\"wrapper\">\n      <div className=\"canvas_holder\">\n        <canvas ref={canvas}></canvas>\n      </div>\n      <Controls\n        canvas={canvas}\n        piximo={piximo}\n        pixelSize={pixelSize}\n        setPixelSize={setPixelSize}\n        save={saveImage}\n        setFileName={setFileName}\n      />\n    </div>\n  );\n};\n\nexport default Canvas;\n","import React from \"react\";\nimport \"./App.css\";\nimport logo from \"./assets/images/logo.png\";\n\nimport Header from \"./components/layout/Header\";\nimport Footer from \"./components/layout/Footer\";\n\nimport Canvas from \"./components/Canvas\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Header logo={logo} logoText=\"Piximo!\"></Header>\n      <main>\n        <section className=\"intro\">\n          <h2>\n            My cat is a magician!\n            <br />\n            <FontAwesomeIcon icon=\"cat\" />\n            <FontAwesomeIcon icon=\"magic\" />\n          </h2>\n\n          <p>He will piximify any image uploaded here! Just give it a try.</p>\n        </section>\n\n        <Canvas />\n      </main>\n      <Footer>\n        Made by &nbsp;\n        <a\n          href=\"https://github.com/MCasante\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          @mcasante\n        </a>\n      </Footer>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { fas } from \"@fortawesome/free-solid-svg-icons\";\n\nlibrary.add(fas);\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}