{"version":3,"sources":["assets/images/logo.png","components/layout/Header/index.js","components/layout/Footer/index.js","utils/piximo-tool.js","components/Controls/index.js","components/Canvas/index.js","App.js","index.js"],"names":["module","exports","Header","props","logo","logoText","children","className","src","alt","Footer","piximoTools","arr","occurrences","forEach","item","hasOwnProperty","Object","entries","imageData","length","pixels","i","r","g","b","a","push","value","Array","from","map","_","canvas","imageWidth","width","height","pixelSize","Math","floor","rowLength","columnLength","ctx","getContext","size","j","setTimeout","posX","posY","slice","getImageData","converted","data","mostCommom","filter","color","reduce","next","pixelReady","split","concat","newPixel","ImageData","Uint8ClampedArray","putImageData","createPixel","Controls","piximo","save","setPixelSize","setFileName","setImageData","inputFile","React","createRef","useState","active","setActive","changePixelSize","Number","htmlFor","onClick","icon","id","name","type","onChange","e","target","current","files","file","fr","FileReader","addEventListener","image","Image","clientWidth","drawImage","result","readAsDataURL","accept","ref","click","disabled","Canvas","fileName","piximoTool","toDataURL","document","createElement","replace","download","href","App","rel","library","add","fas","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.12800e01.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5dee7346.png\";","import React from \"react\";\nimport \"./style.css\";\n\nconst Header = (props) => {\n  const { logo, logoText, children } = props;\n\n  return (\n    <header className=\"page_header\">\n      <div className=\"container\">\n        <div className=\"logo\">\n          <img src={logo} alt=\"Piximo\" />\n          <h1>{logoText}</h1>\n        </div>\n\n        <div className=\"menu_holder\">{children}</div>\n      </div>\n    </header>\n  );\n};\n\nexport default Header;\n","import React from \"react\";\nimport \"./style.css\";\n\nconst Footer = (props) => {\n  const { children } = props;\n  return <footer className=\"page_footer\">{children}</footer>;\n};\n\nexport default Footer;\n","const piximoTools = {\n  getOccurrences(arr) {\n    const occurrences = {};\n\n    arr.forEach((item) =>\n      occurrences.hasOwnProperty(item)\n        ? (occurrences[item] += 1)\n        : (occurrences[item] = 1)\n    );\n\n    return Object.entries(occurrences);\n  },\n  convertImageData(imageData) {\n    const length = imageData.length / 4;\n\n    const pixels = [];\n\n    for (let i = 0; i < length; i++) {\n      const r = imageData[i * 4 + 0];\n      const g = imageData[i * 4 + 1];\n      const b = imageData[i * 4 + 2];\n      const a = imageData[i * 4 + 3];\n\n      pixels.push(`${r},${g},${b},${a}`);\n    }\n    return pixels;\n  },\n  populateArray(value = null, length = 100) {\n    return Array.from({ length }).map((_) => value);\n  },\n};\n\nexport default {\n  piximo(canvas, imageWidth) {\n    const width = canvas.width;\n    const height = canvas.height;\n\n    const pixelSize = Math.floor(width / imageWidth);\n\n    const rowLength = width / pixelSize;\n    const columnLength = (height * rowLength) / width;\n\n    const ctx = canvas.getContext(\"2d\");\n    const size = pixelSize;\n\n    function createPixel(posX, posY, size) {\n      const slice = ctx.getImageData(posX, posY, size, size);\n      const converted = piximoTools.convertImageData(slice.data);\n      const occurrences = piximoTools.getOccurrences(converted);\n      const mostCommom = occurrences\n        .filter((color) => color[0] !== \"0,0,0,0\")\n        .reduce((color, next) => (color[1] >= next[1] ? color : next));\n\n      const pixel = piximoTools.populateArray(\n        mostCommom[0],\n        slice.data.length / 4\n      );\n      const pixelReady = pixel\n        .map((color) => color.split(\",\"))\n        .reduce((arr, next) => arr.concat(next));\n      const newPixel = new ImageData(\n        Uint8ClampedArray.from(pixelReady),\n        slice.width,\n        slice.height\n      );\n      ctx.putImageData(newPixel, posX, posY);\n    }\n\n    for (let i = 0; i < rowLength; i++) {\n      for (let j = 0; j < columnLength; j++) {\n        setTimeout(() => {\n          createPixel(i * size, j * size, size);\n        }, 100);\n      }\n    }\n  },\n};\n","import React from \"react\";\nimport \"./style.css\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nconst Controls = (props) => {\n  const {\n    piximo,\n    canvas,\n    save,\n    pixelSize,\n    setPixelSize,\n    setFileName,\n    setImageData,\n  } = props;\n\n  const inputFile = React.createRef();\n  const [active, setActive] = React.useState(false);\n\n  function handleChanges(name) {\n    setActive(false);\n    setTimeout(() => {\n      setActive(true);\n      setFileName(name);\n    }, 1000);\n  }\n\n  function handleFile() {\n    if (!inputFile.current.files[0]) {\n      return;\n    }\n    const file = inputFile.current.files[0];\n    inputFile.current.value = \"\";\n\n    const fr = new FileReader();\n    fr.addEventListener(\"load\", createImage);\n    fr.readAsDataURL(file);\n\n    function createImage() {\n      const image = new Image();\n\n      image.addEventListener(\"load\", () => {\n        const width = canvas.current.clientWidth;\n        const height = (image.height * width) / image.width;\n\n        canvas.current.width = width;\n        canvas.current.height = height;\n\n        const ctx = canvas.current.getContext(\"2d\");\n        ctx.drawImage(image, 0, 0, width, height);\n        setImageData(ctx.getImageData(0, 0, width, height));\n      });\n\n      image.src = fr.result;\n    }\n\n    handleChanges(file.name);\n  }\n\n  function changePixelSize(value) {\n    value = Number(value);\n    if (value > 256) {\n      value = 256;\n    }\n    if (value < 1) {\n      value = 1;\n    }\n\n    setPixelSize(value);\n  }\n\n  return (\n    <div className=\"controls_holder\">\n      <div className=\"pixel-size-holder\">\n        <label htmlFor=\"pixel-size\">Set canvas width (px)</label>\n        <button\n          className=\"pixel-size-button less\"\n          onClick={() => changePixelSize(pixelSize - 1)}\n        >\n          <FontAwesomeIcon icon=\"minus-circle\" />\n        </button>\n        <input\n          id=\"pixel-size\"\n          name=\"pixel-size\"\n          type=\"number\"\n          value={pixelSize}\n          onChange={(e) => changePixelSize(e.target.value)}\n        />\n\n        <button\n          className=\"pixel-size-button plus\"\n          onClick={() => changePixelSize(pixelSize + 1)}\n        >\n          <FontAwesomeIcon icon=\"plus-circle\" />\n        </button>\n      </div>\n\n      <div className=\"buttons_holder\">\n        <input\n          type=\"file\"\n          className=\"hidden\"\n          onChange={handleFile}\n          accept=\"image/*\"\n          ref={inputFile}\n        />\n\n        <button onClick={() => inputFile.current.click()}>\n          <FontAwesomeIcon icon=\"upload\" />\n          Upload\n        </button>\n        <button onClick={piximo} disabled={active ? false : true}>\n          <FontAwesomeIcon icon=\"magic\" />\n          Piximify!\n        </button>\n        <button onClick={save} disabled={active ? false : true}>\n          <FontAwesomeIcon icon=\"save\" />\n          Save\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Controls;\n","import React from \"react\";\nimport \"./style.css\";\n\nimport piximoTool from \"../../utils/piximo-tool\";\n\nimport Controls from \"../Controls\";\n\nconst Canvas = (props) => {\n  const canvas = React.createRef();\n\n  const [pixelSize, setPixelSize] = React.useState(64);\n  const [fileName, setFileName] = React.useState(\"\");\n  const [imageData, setImageData] = React.useState([]);\n\n  function piximo() {\n    const ctx = canvas.current.getContext(\"2d\");\n    ctx.putImageData(imageData, 0, 0);\n\n    piximoTool.piximo(canvas.current, pixelSize);\n  }\n\n  function saveImage() {\n    const image = canvas.current.toDataURL(\"image/png\");\n    const a = document.createElement(\"a\");\n\n    const name = fileName.replace(/\\.[^/.]+$/, \"\");\n\n    a.download = `${name}-piximo`;\n    a.href = image;\n    a.click();\n  }\n\n  return (\n    <div className=\"wrapper\">\n      <div className=\"canvas_holder\">\n        <canvas ref={canvas}></canvas>\n      </div>\n      <Controls\n        canvas={canvas}\n        piximo={piximo}\n        pixelSize={pixelSize}\n        setPixelSize={setPixelSize}\n        save={saveImage}\n        setFileName={setFileName}\n        setImageData={setImageData}\n      />\n    </div>\n  );\n};\n\nexport default Canvas;\n","import React from \"react\";\nimport \"./App.css\";\nimport logo from \"./assets/images/logo.png\";\n\nimport Header from \"./components/layout/Header\";\nimport Footer from \"./components/layout/Footer\";\n\nimport Canvas from \"./components/Canvas\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Header logo={logo} logoText=\"Piximo!\"></Header>\n      <main>\n        <section className=\"intro\">\n          <h2>\n            My cat is a magician!\n            <br />\n            <FontAwesomeIcon icon=\"cat\" />\n            <FontAwesomeIcon icon=\"magic\" />\n          </h2>\n\n          <p>He will piximify any image uploaded here! Just give it a try.</p>\n        </section>\n\n        <Canvas />\n      </main>\n      <Footer>\n        Made by &nbsp;\n        <a\n          href=\"https://github.com/MCasante\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n        >\n          @mcasante\n        </a>\n      </Footer>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport { fas } from \"@fortawesome/free-solid-svg-icons\";\n\nlibrary.add(fas);\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}